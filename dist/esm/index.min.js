import{createRequire as r}from"module";const e=new(r(import.meta.url)("ajv"))({code:{esm:!0},useDefaults:"empty",messages:!0,removeAdditional:!0,coerceTypes:!0,allErrors:!0,verbose:!0});function t(r){return n(e.compile(r))}function o(r){return n(e.getSchema(r))}function s(r){if(void 0===r.$id)throw new Error("Schema must have $id");return e.addSchema(r),o(r.$id)}function n(r){return function(e,{dataContext:t,i18nFunction:o}={}){let s=r(e,t),n=function(r,e){if(!r||!r.length)return{};let t={},o={};for(const s of r){let r=s.instancePath.split("/");r.shift(),"required"==s.keyword&&r.push(s.params.missingProperty);const n=r.join("."),u={keyword:s.keyword,params:s.params};o[n]?o[n].push(u):o[n]=[u],e&&(e(s),t[n]?t[n].push(s.message):t[n]=[s.message])}return{errorsStructured:o,errorsHumanized:t}}(r.errors,o);return{isValid:s,errors:r.errors,errorsStructured:n.errorsStructured,errorsHumanized:n.errorsHumanized,...r}}}export{t as compileSchema,s as createValidator,o as getValidator};
